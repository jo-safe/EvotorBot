# EvotorBot

**EvotorBot** — автономное Python-приложение для автоматического сбора и выгрузки данных с API кассы **Эвотор** в **Google Sheets**, с возможностью управления через **Telegram-бота**. Позволяет владельцу бизнеса контролировать продажи, возвраты, остатки и работу сотрудников без захода в личный кабинет.

---

## Возможности

1. **Автоматическая ежедневная выгрузка отчёта** в Google Таблицы
2. **Telegram-бот с командами управления**:
   - `/set_schedule` — установка времени выгрузки
   - `/stat_today` — сводка за текущий день (продажи, возвраты, выручка)
   - `/force_export` — немедленная выгрузка данных
   - `/help` — помощь и список команд
3. **Сводка отображается прямо в Telegram**
4. **Автозапуск** приложения при старте системы (Windows / Linux)
5. **Интуитивная настройка** без необходимости редактировать код

---

## Структура Google Sheets

Каждый тип данных выгружается на отдельный лист таблицы:

| Лист         | Поля                                                                 |
|--------------|----------------------------------------------------------------------|
| **Продажи**   | дата, время, номер чека, кассир, товар, кол-во, цена за ед., скидка, сумма, НДС, способ оплаты |
| **Возвраты**  | дата, время, товар, кол-во, сумма, кассир                           |
| **Остатки**   | товар, артикул, остаток                                             |
| **Сотрудники**| имя, ID, количество чеков за день, выручка, средний чек             |

---

## Пример использования

```bash
/set_schedule 10:00
# Устанавливает время ежедневной выгрузки на 10:00

/stat_today
# Получить статистику за сегодня

/force_export
# Немедленно выгрузить текущие данные

/help
# Справка и список доступных команд
```

## Инструкция к настройке

### Linux
1.	**Переместите script.py в /opt/evotor_reports/.
2.	**Создайте файлы evotor_token.txt (токен доступа к API Эвотора), telegram_token.txt (токен Telegram бота), google_credentials.txt (ключи доступа к Google Sheets) в /opt/evotor_reports/.
3.	**Запустите setup.sh, дождитесь окончания выполнения.
4.	**Запустите start_script.sh, дождитесь окончания выполнения. 
5.	**Запустите start_bot.sh, дождитесь окончания выполнения.
6.	**Система готова к использованию.

### Windows:
1.	**Переместите script.py в C:\EvotorReports\.
2.	**Создайте файлы evotor_token.txt (токен доступа к API Эвотора), telegram_token.txt (токен Telegram бота), google_credentials.txt (ключи доступа к Google Sheets) в C:\EvotorReports\.
3.	**Запустите setup.bat, дождитесь окончания выполнения.
4.	**Запустите start_script.bat, дождитесь окончания выполнения. 
5.	**Запустите start_bot.sh, дождитесь окончания выполнения.
6.	**Система готова к использованию.
